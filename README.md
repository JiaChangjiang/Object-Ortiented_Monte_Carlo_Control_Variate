# Object-Ortiented_Monte_Carlo_Control_Variate
stochastic volatiltiy  mdoel and monte carlo and control variate method in a paper
In our program, we construct different the objects and make them communicate with each otherbase on the principle of object-oriented.  This paper will reveals the high lights of our code, andexplain every object and how then connected in the second part. In appendix, there is a flow chartfor our structure.7.1  Code Highlights•We only create one GBM (Geometric Brownian Motion) process in “Valuation” object, the“processGBM” is initialised with a deterministic volatility process in a “MonteCarloCV”object and a stochastic volatility process in the “MonteCarloplain” object respectively. Thetwo processes should use the same random number and initialise in the two different MonteCarlo.•The new method control variates method is implemented in the deterministic volatility class,this class store two functions, one returns the deterministic volatility to the GBM processclass, the other returns the explicit formula for the option class.  Besides, we add Method Iand Method II in the deterministic volatility in the same way.•In our control variates method, “MonteCarloplain” and “MonteCarloCV” share the samerandom number in “fillinguppath” part. In our code, there is an independent random num-ber manager class to manage random numbers on each path. After Monte Carlo method hasbeen executed on every path, the random number will update a new series of random number.•By applying double dispatch, for any deterministic volatility with different process, the pro-gram easily recognises the control variates has explicit or not.   If the control variates hasexplicit, then the explicit can be obtained, else it will return an error message and stop theprogram.•For the arithmetic average Asian option, the option will create a geometric average Asianoption inside, when the auxiliary process is computing payoff and explicit solution, the codereturns the geometric average Asian option function to compute these value.Our code is classified as auxiliary part and valuation part, the auxiliary part consists “Input”object, “Output” object, “Environmentstuff”, “Factorystuff” and “Library”.  The valuation part16
contains  “MonteCarlo”  object,  “Option”  object,  “GBM”  object,  “Stochastic|Volatility”  object,“DeterministicVolatility” object.7.2  Code ArchitectureFor “IOstuff”, first, we construct configuration manager which include environment manager andmonitor. For the environment, it is set to control the ways to input the data to the program and theways to output the result. For the monitor, it is set to monitor the program running statement. Sec-ond, we construct input stuff, output stuff and parameter. For input stuff, it provides 3 approachesto receive the data, which are input data from console, input data from code and input data from’txt’ file.  For the output stuff, output results to console and output results to file can be chosen.Third, the whole structure of parameter is designed to store all parameter that will be used in otherclasses, and the other classes can receive these data by using the “IOmanagement” to obtain anydata they want.For “Factory”, it is a creation mode, which defines a creation object interface, and can instantiateany subclass.  In this project, we can use factory to choose different type of Monte Carlo method,stochastic volatility, deterministic volatility and option to register in the program. Then, pass themthrough all the program to compute some values and get the values.For Library, we contain RegressionOLS, libval, rvlibrary and utility.  The RegressionOLS todo the ordinary least squares regression for control variates.  The libval is used to transform thedata type or do some data type recognition.  rvlibrary contains some function formula that can beapplied to the option price computation.  Some control command can obtain from the utility suchas print command.“Application Wrapper” is to initialise valuation class,  Monitor class,  Output class and Stop-Watch class, and start to monitor the whole program, call the Valuation to obtain values from otherobjects, then set up the output.The whole valuation part starts with a Valuation object and end with an “Output” object.“Valuation” object involves Option base object, GBM process object and Monte Carlo Managerclass which has two derived class CV (Control Variates) Monte Carlo and plain Monte Carlo. Thevaluation object initialises a GBM process class and run a “MonteCarlomanager”.The “GBMprocess” is composed of two volatility processes, one is stochastic volatility classinitialised in “valuation” object, the other one is deterministic volatility process created and ini-17
tialised in the “MonteCarloCV” object.The  stochastic  volatility  class  is  required  to  return  a  generated  stochastic  volatility  value  toGBM process,  The deterministic volatility class is demanded to return a deterministic volatilityvalue to GBM process and return the explicit solution corresponding to the present deterministicvolatility process.There are three different stochastic volatility processes, the “Hestonprocess”, the “Stein-Steinprocess”, the “Hull-Whiteprocess”.The eight deterministic volatility processes include three processes which combined New Methodand three above stochastic volatility processes and other three processes combined the Method Iwith the three stochastic volatility, the other two processes are Method II combined with the Heston,the Hull-White process, the Method II can not be applied in the Stein-Stein process.The “Valuation” object has two Monte Carlo pricing methods, plain Monte Carlo and CV MonteCarlo. The input file will decide which one to run in program.The “MonteCarloManager” contains a “RandomnumberManager” object and create a “Mon-teCarloBase” object, which can be inherited by plain Monte Carlo and CV Monte Carlo.  Forour control variates method, the plain Monte Carlo and CV Monte Carlo must share the same ran-dom number that’s why we create “MonteCarloManager” here. With the manager object, the twodifferent Monte Carlo methods are able to run independently,  which means that even an optionhas no control variates method still cam use plain Monte Carlo pricing.  In its run function, the“MonteCarloManager” will initialise the “MonteCarloBase” with “RandomnumberManager”,option and GBM process and run the “MonteCarloBase”.The plain Monte Carlo does the simulation with setting GBM process to fill up the underlyingpath and create an accumulator object to store each path payoff.The “Monte Carlo CV” creates a “Monte Carlo plain” in its constructor and initialises it withown random number manager object.  This “Monte Carlo CV” has been initialised with an optionbase and a “process GBM” which only has a stochastic volatility process.  When a “Monte CarloCV” is executing, it will create a deterministic volatility process and put it into the “process GBM”.In its run function, the “Monte Carlo CV” will firstly calculate the explicit solution with deter-ministic volatility process. Secondly, the “Monte Carlo CV” will do a similar simulation work with“Monte Carlo plain”, filling up an underlying path and compute the option payoff. The differenceis that when “Monte Carlo CV” run one path with deterministic volatility, it will also call owned18
plain Monte Carlo run one path with stochastic volatility at the same time, the “Monte Carlo CV”then transfer the explicit solution and deterministic volatility simulation payoff to “Control vari-ates” to compute control variates. In the end, the plain Monte Carlo payoff and control variates willbe stored in the “AccumulatorCV”.On each path, a “Monte Carlo CV” has an accumulator to store the payoff with deterministicvolatility process.  The deterministic volatility process payoff is not presented in the result table,we still keep it to check whether the control variates is right.Apart from the plain accumulator, the Monte Carlo CV class has another powerful accumulator“AccumulatorCV”. During computing each path, the control variates and plain Monte Carlo pay-off will be produced and save in it. The final option value will be calculated in “AccumulatorCV”by Ordinary Least Square regression.  The CV average and the correlation coefficientρwill beprinted at the console to check the correctness.The Computation of control variates consists two parts, the Monte Carlo simulation solutionand the explicit solution, control variates is the difference of the two value on each path.  How togenerate simulation solution has been explained before, the explicit solution is computed in optionbase.  We use double dispatch to catch the proper explicit formula,  the explicit solution will bestored as a private member in the Monte Carlo CV cl
